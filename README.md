# Callout Organizer for Obsidian

![](src/builtin.png)

A powerful plugin for organizing, searching, navigating, and citing callouts across your Obsidian vault. Thanks to Claude Code. These codes are all generated by Claude Code.

<div align=center>
<img src="src/logo.svg" width="100px">
</div>

## Features

### üéØ Smart Callout Organization
- **Current File View**: See all callouts in the currently active file
- **Vault-Wide Search**: Search callouts across your entire vault with file caching
- **Type Filtering**: Filter callouts by type with visual buttons
- **Search Integration**: Find callouts by title, content, filename, headers, or block IDs
- **File Caching**: Intelligently caches callout data for faster search performance

![](src/custom.png)

### üé® Visual Customization
- **Color Customization**: Customize colors and icons for any callout type
- **Built-in Support**: Automatic detection of Obsidian's built-in callout types
- **Custom Callouts**: Automatic detection of custom callout types
- **CSS Support:** Add your own CSS snippets

![](src/colors.png)
### üß≠ Enhanced Navigation
- **One-Click Navigation**: Click any callout to jump to its location
- **Breadcrumb Navigation**: File > Header > Block ID hierarchy

### üöÄ Drag & Drop
- **Link Generation**: Drag callouts to create links automatically
- **Embed Support**: Option to create embed links (`![[...]]`) or regular links
- **Auto Callout IDs**: Automatically adds callout IDs when dragging callouts
- **Hide File Names**: Option to hide filenames in links using aliases (e.g., `[[file#^id|id]]`)

## Installation

### Install Manually

1. Create a new folder named `callout-organizer` in the directory `.obsidian/plugins`
2. Download the plugin files `main.js`, `styles.css`, `manifest.json` and add them to the folder `.obsidian/plugins/callout-organizer`
3. Reload Obsidian or restart the app
4. Enable the plugin in Settings > Community Plugins
5. Access via the ribbon icon or command palette

## Usage

### Getting Started
1. **Open the Plugin**: Click the album icon in the ribbon or use `Cmd/Ctrl + P` ‚Üí "Open Callout Organizer"
2. **Switch Modes**: Toggle between "Current File" and "All Files" using the mode button
3. **Filter Types**: Click callout type buttons to show/hide specific types
4. **Search**: Use the search box to find specific callouts

### Navigation
- **Click to Jump**: Click any callout to navigate to its location
- **Breadcrumb Links**: Click filename, headers, or block IDs in the breadcrumb to jump
- **Ctrl/Cmd + Click**: Open in a new tab

### Drag & Drop
- **Create Links**: Drag any callout to your editor to create a link
- **Block IDs**: Block IDs are automatically generated when needed
- **Embed Mode**: Toggle embed links in settings for `![[...]]` vs `[[...]]` format
- **Hidden Filenames**: Enable "Hide file names in links" to create cleaner links with aliases

## Potential Problems

### Callout Standards

Callouts you created should follow the following standards:

```markdown
> [!note] Title
> Contents
> ^callout-id
```

But the original Obsidian block id created automatically is like:

```markdown
> [!note] Title
> Contents

^callout-id
```

The plugin will recognized the second one as a callout without ID.

### Math Block Formulas in Callouts

Math formulas in callouts should follow the following standards:

```markdown
> [!note] Title
> This is an identity matrix.
> $$\begin{pmatrix} 1 & 0 & 0 \\ 0 & 1 & 0 \\ 0 & 0 & 1 \end{pmatrix}$$
```

You should avoid using:

```markdown
> [!note] Title
> This is an identity matrix.
> $$
> \begin{pmatrix}
> 1 & 0 & 0\\
> 0 & 1 & 0\\
> 0 & 0 & 1
> \end{pmatrix}
> $$
```

In the second case, the auto callout IDs will not function properly.

### Callouts in Code Blocks

You may have some callouts in code blocks somewhere. These callouts can also be found in the callout organizer. But when dragging it into the document, the callout will not be found since it is in the code block.

### Missing Callouts

Some old callouts created before using this plugin can not be searched in this plugin. You can solve this problem by changing the filename to ensure the plugin tracking your callouts.

### Cache Management

The plugin uses intelligent file caching to improve search performance:

- **Cache Location**: Stored as `callouts.json` in the plugin folder (`.obsidian/plugins/callout-organizer/`)
- **Auto-Invalidation**: Cache is automatically refreshed when files are modified
- **Manual Refresh**: Use the refresh button in Search mode to force cache rebuild
- **Cache Settings**: Can be disabled in plugin settings if needed

**Cache Troubleshooting**:
- If callouts are missing, try clicking the refresh button in Search mode
- Check that "Enable file cache" is turned on in settings
- Cache automatically rebuilds when files change, but manual refresh may be needed after major vault changes

## Settings

### Display Options
- **Font Sizes**: Adjust callout content and breadcrumb font sizes
- **Header Levels**: Show/hide specific header levels (H1-H6)
- **Filenames & IDs**: Toggle display of filenames and block IDs

### Search Configuration
- **Excluded Folders**: Skip specific folders in vault-wide search
- **Search Fields**: Enable/disable searching in different content areas
- **Result Limits**: Control maximum number of search results
- **File Cache**: Enable/disable file caching for faster search performance

### Callout Customization
- **Colors**: Customize colors for any callout type
- **Icons**: Choose from 150+ Lucide icons
- **Custom CSS**: Add custom styling rules

Here is the recommended CSS snippet for the picture at the beginning of this document.

```css
--callout-border-opacity: 1;
--callout-radius: 0;
--callout-border-width: 0.1em;
background-color: var(--background-primary);
border-color: rgba(var(--callout-color), var(--callout-border-opacity));
border-left-width: 0.3em;
```

Here are the recommended colors of my custom callouts:

<div style="font-weight: bold;color: rgb(255,102,153)">RGB for conjecture is 255, 102, 153</div>
<div style="font-weight: bold;color: rgb(46,168,229)">RGB for definition is 255, 102, 153</div>
<div style="font-weight: bold;color: rgb(241,152,55)">RGB for theorem is 241, 152, 55</div>
<div style="font-weight: bold;color: rgb(255,102,102)">RGB for remark is 255, 102, 102</div>
<div style="font-weight: bold;color: rgb(95,178,54)">RGB for exercise is 95, 178, 54</div>
<div style="font-weight: bold;color: rgb(162,138,229)">RGB for proposition is 162, 138, 229</div>
<div style="font-weight: bold;color: rgb(245,202,0)">RGB for conjecture is 245, 202, 0</div>
<div style="font-weight: bold;color: rgb(229,110,238)">RGB for corollary is 229, 110, 238</div>

The inspiration of this color scheme comes from Zotero and Bilibili.

## License

MIT License - see LICENSE file for details

## Changelog

### Version 1.2.1
- üêõ **Bug Fixes**:
  - Fixed sorting in search mode to properly show recently modified callouts at the top
  - Enhanced cache loading to respect modification time ordering
  - Improved sort logic with better fallback mechanisms for callouts without modification times
- üîß **Technical Improvements**:
  - Updated cache loading logic to apply sorting when retrieving cached callouts
  - Enhanced sorting robustness with fallback chain: `calloutModifyTime` ‚Üí `fileModTime` ‚Üí default timestamp
  - Fixed both grouped and ungrouped callout rendering to use consistent sorting

### Version 1.2.0
- üéâ **Major New Features**:
  - **Smart Time Tracking**: Added intelligent creation and modification time tracking for callouts
  - **Human-Readable Timestamps**: All times now use YYYY-MM-DD HH:mm:ss format instead of Unix timestamps
  - **Intelligent Change Detection**: Only updates modification times when callout content actually changes
  - **Improved calloutID System**: Renamed blockId to calloutID for better semantic clarity
  - **Smart File Change Handling**: Distinguishes between file changes and actual callout content changes
- ‚ú® **Enhanced Time Logic**:
  - **Callouts with IDs**: Robust time tracking that preserves creation times and only updates modification times when content changes
  - **Callouts without IDs**: Synchronized with file modification times for logical behavior
  - **Backward Compatibility**: Automatically converts old timestamp formats to readable format
- üîß **Technical Improvements**:
  - Added smart caching with content comparison for better performance
  - Enhanced cache validation with file modification time checks
  - Improved callout identification using file + calloutID signatures
  - Better error handling and type safety throughout the codebase
- üêõ **Bug Fixes**:
  - Fixed null/undefined property access issues
  - Improved error handling in math rendering
  - Enhanced type checking for better reliability
  - Fixed sorting functions to work with new readable timestamp format

### Version 1.1.1
- üêõ **Bug Fixes**:
  - Fixed search functionality to properly detect callouts in all files
  - Resolved issue where some callouts weren't found in search mode
- ‚ú® **Improvements**:
  - Search mode now always includes callouts from the current file
  - Enhanced file processing reliability with better caching logic
  - Improved search algorithm to ensure no files are skipped

### Version 1.1.0
- üéâ **New Feature**:
  - **Hide File Names in Links**: New drag option to create cleaner links with aliases
  - When enabled, dragged callouts generate links like `[[filename#^theorem-def456|theorem-def456]]`
  - Uses actual callout ID as alias for better readability
  - Works with both regular and embed links
- üîß **Code Improvements**:
  - Optimized filename extraction logic
  - Enhanced drag functionality performance
  - Updated setting descriptions for clarity

### Version 1.0.1
- üêõ **Bug Fixes**:
  - Fixed callout icons displaying correctly
  - Fixed callout title colors using proper callout colors
  - Fixed note callout icon to use correct `lucide-pencil`
  - Fixed toggle button width preventing layout shifts
  - Fixed icon base size for better visual proportions (16px)
- ‚ú® **Improvements**:
  - Moved breadcrumbs to bottom for better organization
  - Enhanced visual layout and spacing
  - Improved code consistency and performance

### Version 1.0.0
- üéâ **Initial Release**
- ‚ú® **New Features**:
  - Responsive icon sizing
  - Cursor centering on navigation
  - Enhanced color handling
  - Drag & drop link creation
- üîß **Improvements**:
  - Simplified folder filtering (exclude-only)
  - Better default settings
  - Improved code consistency
- üêõ **Bug Fixes**:
  - Fixed note callout icon
  - Resolved title color issues
  - Better icon sizing

---

**Made with ‚ù§Ô∏è for the Obsidian community**
